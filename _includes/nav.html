{% assign current = page.url | downcase | split: '/' %}
<nav>
  <ul>

    {% for nav in site.data.nav %}

        {% assign navHref = nav.href | downcase %}

        {% if nav.subcategories != null %}
        <li class="navigation-closed">
            <span class="navigation-icon float-left"></span><a href="{{ site.url }}{{ nav.url }}">{{ nav.title }}</a>
          <ul>
            {% for subcategory in nav.subcategories %}
            {% if current[1] == subcategory.subhref %}
            <li class="active">
            {% else %}    
            <li>
            {% endif %}
                <a href="{{ site.baseurl }}/{{ site.url }}{{ subcategory.subhref }}">{{ subcategory.subtitle }}</a>
            </li>
            {% endfor %}
          </ul>
        </li>

        {% elsif nav.title == page.title or navHref == current[1] %}
        <li class="active">
          <span class="navigation-icon-placeholder float-left"></span><a href="{{ nav.url }}">{{ nav.title }}</a>
        </li>

        {% else %}
        <li>
          <span class="navigation-icon-placeholder float-left"></span><a href="{{ site.baseurl }}/{{ site.url }}{{ nav.href }}">{{ nav.title }}</a>
        </li>
        {% endif %}
    {% endfor %}
  </ul>
</nav>

